

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Standard library reference &mdash; PTF 1.11 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="PTF 1.11 documentation" href="index.html"/>
        <link rel="prev" title="Callable tasks" href="tasks.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> PTF
          

          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tasks.html">Callable tasks</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Standard library reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#main-library-methods">Main library methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-PTF.lib.phase">Phase methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-PTF.lib.draw">Draw methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-PTF.lib.action">Action methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setup-methods">Setup methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-PTF.lib.export">Export methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-PTF.lib.helpers">Various helper methods</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PTF</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Standard library reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/library.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="standard-library-reference">
<span id="standard-library-reference"></span><h1>Standard library reference<a class="headerlink" href="#standard-library-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="main-library-methods">
<span id="main-library-methods"></span><h2>Main library methods<a class="headerlink" href="#main-library-methods" title="Permalink to this headline">¶</a></h2>
<p>These functions provide functionality at the highest levels of abstraction.</p>
<span class="target" id="module-PTF.lib"></span><dl class="function">
<dt id="PTF.lib.configDefaults">
<code class="descclassname">PTF.lib.</code><code class="descname">configDefaults</code><span class="sig-paren">(</span><em>changes</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.configDefaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Default documented config for all tasks in a freely modifiable struct.</p>
<p>Colors, when given, are RGB colors. PTB also accepts RGBA and CLUT.</p>
<p>The defaults used here err on the side of catering to LevyLab's R&amp;A paradigm.
If you're not using it, nuke s.draw from high orbit.</p>
<p>Although the resulting structure contains task-wide config, it is typically
modified with block-specific config right before being passed to <cite>runBlock</cite>
or equivalent. For example, RA_blockDefaults(configDefaults) would modify
these defaults to serve all RA block kinds. RA_lossConfig would then modify
the result of <em>that</em> call for loss-domain blocks, like so:</p>
<blockquote>
<div>config = RA_blockDefaults(configDefaults);
lossConfig = RA_lossConfig(config);</div></blockquote>
<p>Most often, <cite>XYZ_blockDefaults</cite> will use <cite>configDefaults</cite> as a starting point
without an argument. That is a useful option if you don't expect making any
modifications to configDefaults for all your tasks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>changes</strong> -- A field of modifications made to the original set-up (not implemented)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><cite>changes</cite> is not actually implemented yet. Instead, directly modify the
structure returned by the function.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The default config struct with all standard task settings</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">struct</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Implement <cite>changes</cite> to bring some order to post-return alterations.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.runBlock">
<code class="descclassname">PTF.lib.</code><code class="descname">runBlock</code><span class="sig-paren">(</span><em>Data</em>, <em>blockConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.runBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Scaffolds multiple trial calls of the same kind. Saves results to file.</p>
<p>Deprecated in favor of <cite>runNthBlock</cite>.</p>
<p>The main thing <cite>runBlock</cite> needs from blockConfig is for
<cite>.task.fnHandles.trialFn</cite> to be a function handle to which it can pass Data,
trial #, and blockConfig.</p>
<p>If <cite>blockConfig.game</cite> includes fields <cite>preBlockFn</cite> and/or <cite>postBlockFn</cite>, it
will assume they are callable functions and call them with <cite>Data</cite> and
<cite>blockConfig</cite> as arguments. (This means they can display block beginning /
end and wait for keypress, or check if requisite values exist and fail
gracefully, or any number of other things.)</p>
<p>If <cite>Data.filename</cite> does not exist, it will not know how to save the trial
choices (and will issue a warning).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>Data</strong> -- Information collected from task trials</li>
<li><strong>blockConfig</strong> -- The block settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Information collected from task trials.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">DataObject struct</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.runGenericTrial">
<code class="descclassname">PTF.lib.</code><code class="descname">runGenericTrial</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.runGenericTrial" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs through all the phases of an arbitrarily defined trial.</p>
<p>Fully generalized workhorse function to display any phases of an individual
trial, as defined using PhaseConfig objects in blockConfig.trial.phases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- Table of properties of the trial about to be run</li>
<li><strong>blockConfig</strong> -- The block settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Table of trial properties + information gathered from a trial.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">trialData</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.runNthBlock">
<code class="descclassname">PTF.lib.</code><code class="descname">runNthBlock</code><span class="sig-paren">(</span><em>Data</em>, <em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.runNthBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs a specified block and saves that block to a specific location.</p>
<p>Runs Data.blocks{n}.trials using Data.blocks{n}.config and saves the
collected results to Data.blocks{n}.data. See lib/configDefaults.m for the
parameters that a block can have.</p>
<p>If <cite>Data.filename</cite> does not exist, it will not know how to save the trial
choices (and will issue a warning).</p>
<p>(Replaces <cite>runBlock</cite>, which is now deprecated.)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>Data</strong> -- Information collected from task trials</li>
<li><strong>n</strong> -- An integer index of the block to run in Data.blocks{n}</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Updated information collected from task trials.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Data</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.runPhase">
<code class="descclassname">PTF.lib.</code><code class="descname">runPhase</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em>, <em>phaseConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.runPhase" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a generic phase defined with a phaseConfig construct.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- Table of trial properties</li>
<li><strong>blockConfig</strong> -- The block settings</li>
<li><strong>phaseConfig</strong> -- The phase settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Table of trial properties, updated with collected data</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">trialData</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.runRATrial">
<code class="descclassname">PTF.lib.</code><code class="descname">runRATrial</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.runRATrial" title="Permalink to this definition">¶</a></dt>
<dd><p>Workhorse function to display all typical phases of an risk-and-ambiguity trial.</p>
<p>Deprecated in favor of <cite>runGenericTrial</cite>.</p>
<p>In turn, it displays the task-specific choice options, response prompt,
response input feedback, and the intertrial period. It displays them using
function handles set in <cite>blockConfig.trial.legacyPhases</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- Table of trial properties</li>
<li><strong>blockConfig</strong> -- The block settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Table of trial properties, updated with collected data</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">trialData</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-PTF.lib.phase">
<span id="phase-methods"></span><span id="phase-methods"></span><h2>Phase methods<a class="headerlink" href="#module-PTF.lib.phase" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="PTF.lib.phase.legacyPhaseStruct">
<code class="descclassname">PTF.lib.phase.</code><code class="descname">legacyPhaseStruct</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.phase.legacyPhaseStruct" title="Permalink to this definition">¶</a></dt>
<dd><p>Default phase config for R&amp;A-based tasks. Deprecated.</p>
<p>If you're only changing some element of a phase, but you're happy with the
standard order of phases (i.e. choice display, response prompt, feedback,
intertrial), you can substitute a function here. It should take, and return,
the same arguments that the phase function in lib/phase does. (In general,
this is <cite>sampleFn(trialData, blockConfig, phaseConfig)</cite>.)</p>
<p>By design, showChoicePhaseFn is left blank. <cite>runRATrial</cite> will complain if it
is not set, or if any of the phase function handles below are unset. While
you might avoid setting it by writing your own trial script, it is
recommended that you still leverage these config; it will make your task
easier to maintain and understand for your collaborators.</p>
<p>By design, s.game.responsePhaseFn is set to &#64;phase_response; however, if your
showChoice function collects responses during the display, it can be set to
NaN.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The phase settings for risk and ambiguity tasks.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">phases_RA</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.phase.phaseConfig">
<code class="descclassname">PTF.lib.phase.</code><code class="descname">phaseConfig</code><span class="sig-paren">(</span><em>name</em>, <em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.phase.phaseConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares a uniform structure for the definition of a phase.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> -- The phase name or ID</li>
<li><strong>'PropertyValue1', ...</strong> (<em>'PropertyName1',</em>) -- Any number of phase configuration
properties</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The phase settings.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">phaseConfig</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.phase.phase_ITI">
<code class="descclassname">PTF.lib.phase.</code><code class="descname">phase_ITI</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em>, <em>phaseConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.phase.phase_ITI" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays the intertrial &quot;refocus&quot; symbol in between trials.</p>
<p>Display duration is based on the value in <cite>trialData.ITIs</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- The participant data from a trial</li>
<li><strong>blockConfig</strong> -- The block settings</li>
<li><strong>phaseConfig</strong> -- The phase settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The participant data from a trial.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">trialData</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">Modular phase has no smart way of determining what the duration should be
if it is constant. It relies on a duration fields in
blockConfig.trial.legacyPhases.{X} enumeration. Possible solution:
trialData.trialDuration, which checks for
blockConfig.task.constantBlockDuration to see what duration to do.
(Alternative: if isnan(phaseConfig.duration), need to compute it.)</p>
</div>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.phase.phase_feedback">
<code class="descclassname">PTF.lib.phase.</code><code class="descname">phase_feedback</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em>, <em>phaseConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.phase.phase_feedback" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays feedback of trial choice for a specified time.</p>
<p>Based on the value in <cite>trialData.choice</cite>, draws the feedback that confirms to
the player which option they chose (or whether they chose at all) and
displays it for <cite>blockConfig.trial.legacyPhases.feedback.duration</cite>. Can be
re-used for tasks that offer two options in a choice.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- The participant data from a trial</li>
<li><strong>blockConfig</strong> -- The block settings</li>
<li><strong>phaseConfig</strong> -- The phase settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Updated participant data from a trial.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">trialData</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.phase.phase_generic">
<code class="descclassname">PTF.lib.phase.</code><code class="descname">phase_generic</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em>, <em>phaseConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.phase.phase_generic" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a &quot;run-of-the-mill&quot; phase</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- The participant data from a trial.</li>
<li><strong>blockConfig</strong> -- The block settings</li>
<li><strong>phaseConfig</strong> -- The phase settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The (possibly updated) participant data from a trial.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">trialData</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.phase.phase_response">
<code class="descclassname">PTF.lib.phase.</code><code class="descname">phase_response</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em>, <em>phaseConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.phase.phase_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw response prompt and handle potential response keypress or lack thereof.</p>
<p>Takes standard phase script arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- The participant data from a trial</li>
<li><strong>blockConfig</strong> -- The block settings</li>
<li><strong>phaseConfig</strong> -- The phase settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Updated participant data from a trial.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">trialData</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.phase.phase_showChoice">
<code class="descclassname">PTF.lib.phase.</code><code class="descname">phase_showChoice</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em>, <em>phaseConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.phase.phase_showChoice" title="Permalink to this definition">¶</a></dt>
<dd><p>Phase shows the choices defined in trialData and blockConfig.</p>
<p>This includes a lottery and a reference. If available, executes action
defined in phaseConfig.action; otherwise, waits for duration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- The participant data from a trial.</li>
<li><strong>blockConfig</strong> -- The block settings</li>
<li><strong>phaseConfig</strong> -- The phase settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Updated participant data from a trial.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">trialData</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.phase.pickAndEvaluateTrial">
<code class="descclassname">PTF.lib.phase.</code><code class="descname">pickAndEvaluateTrial</code><span class="sig-paren">(</span><em>DataObject</em>, <em>config</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.phase.pickAndEvaluateTrial" title="Permalink to this definition">¶</a></dt>
<dd><p>Picks a recorded trial at random, evaluates it, and displays the outcome.</p>
<p>This can be run as a post-block callback. To do this, include
<cite>blockConfig.task.fnHandles.postBlockFn = &#64;pickAndEvaluateTrial</cite> in your
configuration file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>DataObject</strong> -- An object with participant records &amp; other session info</li>
<li><strong>config</strong> -- A standard block setting (from trial to block to Screen)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>2-element tuple containing</p>
<ul class="simple">
<li><strong>outcomeKind</strong>: Type of outcome picked (reference, win, or loss)</li>
<li><strong>outcomeLevel</strong>: Type of choice picked (reference or lottery)</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This was written in a hurry, and should at some point be refactored.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.phase.preBlock">
<code class="descclassname">PTF.lib.phase.</code><code class="descname">preBlock</code><span class="sig-paren">(</span><em>Data</em>, <em>blockConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.phase.preBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Display &quot;Block N: (BLOCKNAME)&quot; and wait indefinitely for a break key.</p>
<p>Break keys are defined in blockConfig.device.breakKeys.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>Data</strong> -- Information collected (in this case on blocks)</li>
<li><strong>blockConfig</strong> -- The block settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Information collected (unchanged)
blockConfig: The block settings (unchanged)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Data</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-PTF.lib.phase.helpers"></span><dl class="function">
<dt id="PTF.lib.phase.helpers.choiceReport">
<code class="descclassname">PTF.lib.phase.helpers.</code><code class="descname">choiceReport</code><span class="sig-paren">(</span><em>trialData</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.phase.helpers.choiceReport" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints to stdout participant choice and decision properties.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>trialData</strong> -- A table of trial information</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Whether participant chose the lottery and what the properties of
the offered lottery were.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.phase.helpers.findPTBTimestamp">
<code class="descclassname">PTF.lib.phase.helpers.</code><code class="descname">findPTBTimestamp</code><span class="sig-paren">(</span><em>trialData</em>, <em>phaseConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.phase.helpers.findPTBTimestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the correct timestamp from the (optional) structures, or getSecs() if
nothing suitable is found.</p>
<p>Suitable locations:</p>
<ul class="simple">
<li><cite>startTimestamp</cite> field in <cite>phaseConfig</cite></li>
<li><cite>${PHASENAME}Start</cite> or <cite>${PHASENAME}StartTS</cite> in <cite>trialData</cite>.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- A table of trial information</li>
<li><strong>phaseConfig</strong> -- Phase configuration</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>2-element tuple containing</p>
<ul class="simple">
<li><strong>PTBTimestamp</strong>: A record of the PTB trial timestamp.</li>
<li><strong>found</strong>: A boolean signaling whether a timestamp was found. If false,
the returned PTBTimestamp is the output of GetSecs().</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-PTF.lib.draw">
<span id="draw-methods"></span><span id="draw-methods"></span><h2>Draw methods<a class="headerlink" href="#module-PTF.lib.draw" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="PTF.lib.draw.drawBgr">
<code class="descclassname">PTF.lib.draw.</code><code class="descname">drawBgr</code><span class="sig-paren">(</span><em>blockConfig</em>, <em>callback</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.draw.drawBgr" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws default background and sets default drawing properties</p>
<p>The most important default drawing properties set are fontName and fontSize.</p>
<p>To draw task-specific things, you can supply a callback function that does
them. For instance, you can supply the task-relevant drawRef function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>blockConfig</strong> -- The block settings</li>
<li><strong>callback</strong> -- A function handle to execute after the function has concluded.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Like all draw functions, it has no return.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Unlike other draw functions, drawBgr only takes <cite>blockConfig</cite>, not
<cite>trialData</cite>, and does not allow access to or modification of <cite>trialData</cite>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.draw.drawFeedback">
<code class="descclassname">PTF.lib.draw.</code><code class="descname">drawFeedback</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.draw.drawFeedback" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws the feedback according to trial data and config.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- The participant data from a trial</li>
<li><strong>blockConfig</strong> -- The block settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Like all draw functions, it has no return.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-2">
<p class="first admonition-title">Todo</p>
<p class="last">If blockConfig.draw.lottery.verticalLayout is set to true, the feedback
should be be drawn to the side vertically rather than horizontally.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.draw.drawITI">
<code class="descclassname">PTF.lib.draw.</code><code class="descname">drawITI</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.draw.drawITI" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws the inactivity symbol (by default, white oval) between trials.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- The participant data from a trial (unused)</li>
<li><strong>blockConfig</strong> -- The block settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Like all draw functions, it has no return.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-3">
<p class="first admonition-title">Todo</p>
<p class="last">Nigh-duplicate code with drawResponsePrompt. Factor out the general
&quot;draw an object in the center when provided the center and
blockConfig.draw.(object)&quot;.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.draw.drawLotto">
<code class="descclassname">PTF.lib.draw.</code><code class="descname">drawLotto</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.draw.drawLotto" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws a lottery as specified in trialData in the center of the screen.</p>
<p>Uses an open PTB screen and other properties of blockConfig. If
blockConfig.draw.lottery.offCenterByPx exists, drawLotto will shift
the lottery by the specified amount of pixels.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you wish to draw multiple lotteries or determine the offset dynamically,
you will need to hot-patch the arguments to this function. A redress is
under development.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- Trial properties and collected participant data</li>
<li><strong>blockConfig</strong> -- The block settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Like all draw functions, it has no return.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.draw.drawRef">
<code class="descclassname">PTF.lib.draw.</code><code class="descname">drawRef</code><span class="sig-paren">(</span><em>blockConfig</em>, <em>trialData</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.draw.drawRef" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws the stable reference value on screen.</p>
<p>To get the side and reference value, it uses getReferenceSideAndValue, which
searches the structures supplied as arguments.</p>
<p>If blockConfig.draw.lottery.verticalLayout is set to true, the reference will
be drawn to the side vertically rather than horizontally.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>blockConfig</strong> -- The block settings</li>
<li><strong>trialData</strong> -- Trial properties and collected participant data</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Like all draw functions, it has no return.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.draw.drawResponsePrompt">
<code class="descclassname">PTF.lib.draw.</code><code class="descname">drawResponsePrompt</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.draw.drawResponsePrompt" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws the response prompt symbol (by default, green oval).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- Trial properties and collected participant data</li>
<li><strong>blockConfig</strong> -- The block settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Like all draw functions, it has no return.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-4">
<p class="first admonition-title">Todo</p>
<p class="last">Nigh-duplicate code with drawITI. Factor out the general &quot;draw an object in
the center when provided the center and blockConfig.draw.(object)&quot;.</p>
</div>
</dd></dl>

<span class="target" id="module-PTF.lib.draw.helpers"></span><dl class="function">
<dt id="PTF.lib.draw.helpers.centerRectDims">
<code class="descclassname">PTF.lib.draw.helpers.</code><code class="descname">centerRectDims</code><span class="sig-paren">(</span><em>center</em>, <em>rectSize</em>, <em>pxOffCenter</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.draw.helpers.centerRectDims" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds center of screen and centers objects.</p>
<p>A helper function to calculate what the top-left pixel of an object is such
that the object will appear centered. Accepts <cite>center</cite> that defines [x y] of
the screen's center, <cite>rectSize</cite> that defines the object's dimensions, and
(non-obligatory) <cite>pxOffCenter</cite>, which shifts the resulting position.</p>
<p>If pxOffCenter is supplied, shifts the computation by that much in both
dimensions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>center</strong> -- The 2x1 coordinates of (a screen's) center</li>
<li><strong>rectSize</strong> -- The 2x1 dimensions of a rectangle (screen)</li>
<li><strong>pxOffCenter</strong> -- A simple integer value by which the result should be adjusted
in both dimensions.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The 2x2 rectangular matrix of xy-coordinates usable as argument for
<cite>PTB::Screen</cite> functions.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.draw.helpers.dollarFormatter">
<code class="descclassname">PTF.lib.draw.helpers.</code><code class="descname">dollarFormatter</code><span class="sig-paren">(</span><em>value</em>, <em>windowPtr</em>, <em>fontSize</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.draw.helpers.dollarFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>When given a numerical value, outputs its correct format in dollars and, if
provided <cite>windowPtr</cite>, its width and height on screen.</p>
<p>If <cite>fontSize</cite> is not provided, the width and height will be estimated with
currently set font size.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>value</strong> -- Any integer to be conveted into a dollar string</li>
<li><strong>windowPtr</strong> -- A window pointer to specify active screen</li>
<li><strong>fontSize</strong> -- The desired font size of the displayed dollar amount</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>2-element tuple containing</p>
<ul class="simple">
<li>txt: A string of monetary values.</li>
<li>dims: The dimensions of <cite>txt</cite> when printed</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.draw.helpers.getTextDims">
<code class="descclassname">PTF.lib.draw.helpers.</code><code class="descname">getTextDims</code><span class="sig-paren">(</span><em>windowPtr</em>, <em>txt</em>, <em>fontSize</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.draw.helpers.getTextDims" title="Permalink to this definition">¶</a></dt>
<dd><p>For window at <cite>windowPtr</cite>, get dimensions of <cite>txt</cite>.</p>
<p>This will be at current font size or, if provided, at <cite>fontSize</cite>.</p>
<p>Adapted from Ruonan Jia's initial implementation in the MDM task.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>windowPtr</strong> -- A window pointer to specify active screen</li>
<li><strong>txt</strong> -- The characters displayed on a screen</li>
<li><strong>fontSize</strong> -- The size of the existing text</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The 1x2 dimensions of the displayed text.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.draw.helpers.imgLookup">
<code class="descclassname">PTF.lib.draw.helpers.</code><code class="descname">imgLookup</code><span class="sig-paren">(</span><em>keyIdx</em>, <em>fnameLookupTbl</em>, <em>textureLookupTbl</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.draw.helpers.imgLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Supplies the texture and image dimensions of an image.</p>
<p>Looks up what texture <cite>keyIdx</cite> corresponds to, taking it for a simple index
in <cite>fnameLookupTbl</cite>. (The middle step is looking up what texture ID a picture
identified by its path corresponds to.)</p>
<p>Assumes a <cite>fnameLookupTbl</cite> has a list of image filenames. If
<cite>textureLookupTbl</cite> is provided, it is assumed it was created by
<cite>loadTexturesFromConfig</cite> and is up-to-date. If not, an error is thrown, as
<cite>imgLookup</cite> does not have a pointer to the currently open Screen it would
need to create the texture on its own.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>keyIdx</strong> -- A key index</li>
<li><strong>fnameLookupTbl</strong> -- A table composed of image filenames to draw from</li>
<li><strong>textureLookupTbl</strong> -- A table composed of image textures</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>2-element tuple containing</p>
<ul class="simple">
<li><strong>textureId</strong>: An image specific texture ID</li>
<li><strong>imgDims</strong>: The specific image dimensions</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">There is no enforcement of image paths being supplied as absolute paths.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.draw.helpers.orderLotto">
<code class="descclassname">PTF.lib.draw.helpers.</code><code class="descname">orderLotto</code><span class="sig-paren">(</span><em>trialData</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.draw.helpers.orderLotto" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the probability and win/loss amount for each lottery.</p>
<p>Given the win color for the trial, it returns two sorted matrices with the
probability (and, respectively, payoff) values sorted such that the first
will appear on top and the second on the bottom of the drawLotto display.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>trialData</strong> -- The data stored for each trial</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">2-element tuple containing<ul class="simple">
<li><strong>probOrder</strong>: A probability matrix of a win versus a loss.</li>
<li><strong>amtOrder</strong>: A matrix of the amount that was won or lost.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.draw.helpers.textLookup">
<code class="descclassname">PTF.lib.draw.helpers.</code><code class="descname">textLookup</code><span class="sig-paren">(</span><em>keyIdx</em>, <em>lookupTable</em>, <em>windowPtr</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.draw.helpers.textLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Looks up a text by key, optionally computing text dimensions.</p>
<p>Given an index in <cite>keyIdx</cite>, returns the (presumed character array) value
corresponding to that index in <cite>lookupTable</cite> cell array. If provided
<cite>windowPtr</cite>, also returns the dimensions that the text would take up under
the current config in that PTB window.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>keyIdx</strong> -- A key index</li>
<li><strong>lookupTable</strong> -- A table containing indexed values</li>
<li><strong>windownPtr</strong> -- A window pointer to specify screen</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>2-element tuple containing</p>
<ul class="simple">
<li><strong>txt</strong>: The characters displayed on a screen.</li>
<li><strong>txtDims</strong>: The dimensions of the displayed text.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.draw.helpers.xyAndDimsToRect">
<code class="descclassname">PTF.lib.draw.helpers.</code><code class="descname">xyAndDimsToRect</code><span class="sig-paren">(</span><em>xy</em>, <em>dims</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.draw.helpers.xyAndDimsToRect" title="Permalink to this definition">¶</a></dt>
<dd><p>Given origin point and dimensions, returns the rect matrix for Screen.</p>
<p>Converts a top-left xy-coordinate and a 2x1 widthxlength matrix to 2x2
dimensions expected by PsychToolBox's Screen.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xy</strong> -- The coordinate top-left origin of an object</li>
<li><strong>dims</strong> -- The dimensions (height and width) of an object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A rectangle usable by Screen</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">rect</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-PTF.lib.action">
<span id="action-methods"></span><span id="action-methods"></span><h2>Action methods<a class="headerlink" href="#module-PTF.lib.action" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="PTF.lib.action.action_collectResponse">
<code class="descclassname">PTF.lib.action.</code><code class="descname">action_collectResponse</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em>, <em>phaseConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.action.action_collectResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Phase action to record the participant's response.</p>
<p>For duration specified in phaseConfig.duration, waits for one of the
keypresses specified in blockConfig.device.choiceKeys.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Currently, the function is R&amp;A-specific: it will only expect the first two
keys, and it will recode the choice to choseLottery via keyToChoice.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- The participant data from a trial so far</li>
<li><strong>blockConfig</strong> -- The block settings</li>
<li><strong>phaseConfig</strong> -- The phase settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Updated participant data from a trial.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">trialData</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.action.action_display">
<code class="descclassname">PTF.lib.action.</code><code class="descname">action_display</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em>, <em>phaseConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.action.action_display" title="Permalink to this definition">¶</a></dt>
<dd><p>Phase action to simply display phase content without any interaction.</p>
<p>Duration is specified in phaseConfig.duration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- The participant data from a trial so far</li>
<li><strong>blockConfig</strong> -- The block settings</li>
<li><strong>phaseConfig</strong> -- The phase settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Updated participant data from a trial.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">trialData</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.action.action_waitForBreak">
<code class="descclassname">PTF.lib.action.</code><code class="descname">action_waitForBreak</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em>, <em>phaseConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.action.action_waitForBreak" title="Permalink to this definition">¶</a></dt>
<dd><p>Phase action to wait for a break key press.</p>
<p>For a duration specified in phaseConfig.duration, waits for the press of a
break key defined in blockConfig.device.breakKeys.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- The participant data from a trial so far</li>
<li><strong>blockConfig</strong> -- The block settings</li>
<li><strong>phaseConfig</strong> -- The phase settings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Updated participant data from a trial.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">trialData</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="setup-methods">
<span id="setup-methods"></span><h2>Setup methods<a class="headerlink" href="#setup-methods" title="Permalink to this headline">¶</a></h2>
<p>Setup functions prepare the task to be displayed, be it through generating its varieties or through establishing the necessary PsychToolbox infrastructure.</p>
<span class="target" id="module-PTF.lib.setup"></span><dl class="function">
<dt id="PTF.lib.setup.addGeneratedBlock">
<code class="descclassname">PTF.lib.setup.</code><code class="descname">addGeneratedBlock</code><span class="sig-paren">(</span><em>DataObject</em>, <em>blockTrials</em>, <em>config</em>, <em>conditions</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.setup.addGeneratedBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Properly stores ordered block components (trials and config) in a DataObject.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>DataObject</strong> -- An object storing block components</li>
<li><strong>blockTrials</strong> -- A table of trials set up for each block</li>
<li><strong>config</strong> -- A configuration of the block components</li>
<li><strong>conditions</strong> -- A structure of how to configure block components</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">An object storing block components.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">DataObject</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.setup.generateBlocks">
<code class="descclassname">PTF.lib.setup.</code><code class="descname">generateBlocks</code><span class="sig-paren">(</span><em>blockConfig</em>, <em>catchTrial</em>, <em>catchIdx</em>, <em>adHocTrials</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.setup.generateBlocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a cell array of trial tables within a block.</p>
<p>Trial tables are generated with <cite>generateTrials</cite> from
blockConfig.trial.generate, separated into blocks with a fixed number of rows
(defined in blockConfig.task.blockLength). If given further arguments, it
will also add to the final trial table the table <cite>catchTrial</cite> at per-block
indices passed in <cite>catchIdx</cite>. If <cite>adHocTrials</cite> are provided, they are mixed
in with the generated trials prior to randomizationand separation into
blocks.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>catchTrial must include all the columns that <cite>generateTrials</cite> will create
based on <cite>blockConfig.trial.generate</cite>. An easy way to find what these are
is to run this function without catchTrial or catchIdx.</p>
<p class="last">If catchIdx is not provided, the catch trial will be placed randomly within
each block.</p>
</div>
<p>The function also adds ITIs to be generated per trial.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If ITIs matter (e.g. for fMRI tasks), make sure that you've provided as
many of them as necessary for <em>non-catch</em> trials. (Catch trials must have
their own ITI defined in the column <cite>ITIs</cite>.)</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>blockConfig</strong> -- A configuration of the block</li>
<li><strong>catchTrial</strong> -- An single-row table with trial properties for a catch trial</li>
<li><strong>catchIdx</strong> -- (Optional) Catch trial is to be presented as catchIdx'th trial</li>
<li><strong>adHocTrials</strong> -- Any added trials to block</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">An array of trial tables in block.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">plannedBlocks</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.setup.generateTrials">
<code class="descclassname">PTF.lib.setup.</code><code class="descname">generateTrials</code><span class="sig-paren">(</span><em>levelConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.setup.generateTrials" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Generates a table of risk&amp;ambiguity trials that contain all</dt>
<dd>combinations of <cite>levelConfig</cite> struct subfields.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>levelConfig</strong> -- A configuration level containing trial information</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A table of all the trial information to be collected.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">trialTbl</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The generator is specific to the risk/ambiguity task. It expects that the
struct will contain <cite>stakes</cite> and at least one of (<cite>probs</cite>, <cite>ambigs</cite>)
fields.  It will also combine them in a particular way (specifically,
assuming that all ambiguous trials are coupled with .5 probability, and all
probability trials have at least one appearance with zero ambiguity). It
distributes all other subfields it finds randomly across thus generated
trials.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you wish to omit any ambiguous trials but do not wish to delete the
struct field, you can also pass an empty matrix to achieve the same result.</p>
<p class="last">There is currently no way to disabuse generateTrials of the assumption that
the midpoint of ambiguity occluder is at 0.5.</p>
</div>
<p>Generally speaking: if your task only differs slightly from the monetary
R&amp;A task, you should be able to use this script with minimum alteration. If
your task is substantially different, you might have to roll your own.</p>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.setup.importTrials">
<code class="descclassname">PTF.lib.setup.</code><code class="descname">importTrials</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.setup.importTrials" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a table of trial properties by reading them from a tabular file.</p>
<p>If the provided does not exist, it will raise an error.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The function does not verify that the file defines the _correct_
properties; indeed, it just reads the file and returns its contents.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> -- File name of a tabular file (e.g. in CSV format) with trial
properties</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A table of the trial information.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">trialTable</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-5">
<p class="first admonition-title">Todo</p>
<p class="last">Maybe this does not have to be a hard failure, but rather could allow a
graceful fallback onto on-the-fly generation?</p>
</div>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.setup.loadPTB">
<code class="descclassname">PTF.lib.setup.</code><code class="descname">loadPTB</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.setup.loadPTB" title="Permalink to this definition">¶</a></dt>
<dd><p>Start PsychToolBox; return config struct with display info.</p>
<p>Most importantly, the display info is in config.device; the essential one is
s.device.windowPtr.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config</strong> -- Initial configuration of a PTB set-up</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Updated configuration of PTB set-up</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">config</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.setup.loadTexturesFromConfig">
<code class="descclassname">PTF.lib.setup.</code><code class="descname">loadTexturesFromConfig</code><span class="sig-paren">(</span><em>configStruct</em>, <em>textureMap</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.setup.loadTexturesFromConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a texture map of images and image information.</p>
<p>Given a <cite>configStruct</cite>, it will extract file paths named <cite>.img</cite> and return a
container mapping valid image filenames to a struct containing PTB's
<cite>.textureId</cite> and their dimensions in <cite>.dims</cite>. If provided with a previously
generated <cite>textureMap</cite>, it will avoid redundant loading of previously loaded
images.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>configStruct</strong> -- A configuration structure containing named images</li>
<li><strong>textureMap</strong> -- Optionally, a previously created textureMap to update</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>A data structure of texture pointer and dimensions mapped to a</dt>
<dd><p class="first last">filename.</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">textureMap</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.setup.preparePractice">
<code class="descclassname">PTF.lib.setup.</code><code class="descname">preparePractice</code><span class="sig-paren">(</span><em>DataObject</em>, <em>selectBlockIdx</em>, <em>numTrialsFromBlock</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.setup.preparePractice" title="Permalink to this definition">¶</a></dt>
<dd><p>Trims DataObject.blocks to selected indices; selects numTrialsFromBlock at random.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>DataObject</strong> -- An object containing data on blocks</li>
<li><strong>selectBlockIdx</strong> -- An array of selected block indices</li>
<li><strong>numTrialsFromBlock</strong> -- The number of trials within a given block</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">An updated object containing data on (trimmed) blocks</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">DataObject</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.setup.setupPracticeConfig">
<code class="descclassname">PTF.lib.setup.</code><code class="descname">setupPracticeConfig</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.setup.setupPracticeConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable saving and randomize reference side assignment for practice runs</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config</strong> -- A configuration of practice runs</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">An updated configuration of practice runs</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">config</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.setup.unloadPTB">
<code class="descclassname">PTF.lib.setup.</code><code class="descname">unloadPTB</code><span class="sig-paren">(</span><em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.setup.unloadPTB" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes windows &amp; textures from the passed config(s). Resets Screen config.</p>
<p>closeScreen accepts arbitrarily many config structs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config2, ...</strong> (<em>config1,</em>) -- Any number of configuration objects</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-PTF.lib.export">
<span id="export-methods"></span><span id="export-methods"></span><h2>Export methods<a class="headerlink" href="#module-PTF.lib.export" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="PTF.lib.export.exportSubject">
<code class="descclassname">PTF.lib.export.</code><code class="descname">exportSubject</code><span class="sig-paren">(</span><em>DataObject</em>, <em>fname</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.export.exportSubject" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a DataObject, it unites all records in one table.</p>
<p>If given fname, it will also write the table into a file.</p>
<p>The file format has to be any that <cite>writetable</cite> can handle; consult its docs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>DataObject</strong> -- An object containing participant data.</li>
<li><strong>fname</strong> -- Optionally, a file name to save the resultant table in.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A table containing all recorded information in all blocks.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">exportTable</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.export.exportTaskData">
<code class="descclassname">PTF.lib.export.</code><code class="descname">exportTaskData</code><span class="sig-paren">(</span><em>taskName</em>, <em>fname</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.export.exportTaskData" title="Permalink to this definition">¶</a></dt>
<dd><p>Exports all subject data in tasks/<cite>taskName</cite>/data.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The function merely concatenates the sequential outputs of exportSubject.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>taskName</strong> -- Name of the task to export. Assumed to be folder name.</li>
<li><strong>fname</strong> -- Optional file name in which to save the results table.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A table of all participant data collected in the task.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">exportTable</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-PTF.lib.helpers">
<span id="various-helper-methods"></span><span id="various-helper-methods"></span><h2>Various helper methods<a class="headerlink" href="#module-PTF.lib.helpers" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="PTF.lib.helpers.configHasLookups">
<code class="descclassname">PTF.lib.helpers.</code><code class="descname">configHasLookups</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.helpers.configHasLookups" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if lookups exist and are non-empty. (Tests presence of image payoffs.)</p>
<p>The function is commonly used to detect if the config defines an image + text
value to substitute for the value in trialData specification.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config</strong> -- Block configuration</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Boolean true if lookups field is present and contains content.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.helpers.cutArrayToSize">
<code class="descclassname">PTF.lib.helpers.</code><code class="descname">cutArrayToSize</code><span class="sig-paren">(</span><em>arr</em>, <em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.helpers.cutArrayToSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Cuts, or extends, arr so that it has length n.</p>
<p>If <cite>n</cite> is not a direct multiple of the length of <cite>arr</cite>, the first n %%
length(arr) elements are used.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>arr</strong> -- A cell array</li>
<li><strong>n</strong> -- Length of desired array</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A cell array with desired length</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">arr</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-6">
<p class="first admonition-title">Todo</p>
<p class="last">If this is a character array, make it into a cell array to ensure
expected behavior.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.helpers.experimentSummary">
<code class="descclassname">PTF.lib.helpers.</code><code class="descname">experimentSummary</code><span class="sig-paren">(</span><em>Data</em>, <em>blockId</em>, <em>trialId</em>, <em>bagMap</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.helpers.experimentSummary" title="Permalink to this definition">¶</a></dt>
<dd><p>Picks a trial; returns info necessary for in-person lottery realization.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><strong>Deprecated.</strong> Use methods that evaluate lotteries instead.</p>
</div>
<p>If <cite>bagMap</cite> is supplied, it will use it instead of the default
lookup map.</p>
<p>You might want to load the bagMap via <cite>readtable</cite> from a CSV/XLS file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is different from the original behavior of <cite>experimentSummary</cite>, which
returned a human-readable struct array that encompassed <em>all</em> trials.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.helpers.getBlocksForPractice">
<code class="descclassname">PTF.lib.helpers.</code><code class="descname">getBlocksForPractice</code><span class="sig-paren">(</span><em>practiceBlocks</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.helpers.getBlocksForPractice" title="Permalink to this definition">¶</a></dt>
<dd><p>Give the practice blocks to run from a trimmed practice-only block set.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><strong>Deprecated.</strong> Use methods that evaluate lotteries instead.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Assumes that <cite>preparePractice</cite> has been run, removed the blocks that
weren't selected, and re-numbered the block span.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>practiceBlocks</strong> -- A set of practice blocks</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">2-element tuple containing<ul class="simple">
<li><strong>firstBlockIdx</strong>: The index of the first block to run</li>
<li><strong>lastBlockIdx</strong>: The index of the last block to run</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.helpers.getBlocksForSession">
<code class="descclassname">PTF.lib.helpers.</code><code class="descname">getBlocksForSession</code><span class="sig-paren">(</span><em>DataObject</em>, <em>blocksPerSession</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.helpers.getBlocksForSession" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the indices for the blocks to begin and end the current session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>DataObject</strong> -- An object containing block information</li>
<li><strong>blocksPerSession</strong> -- The number of blocks to run this session</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>2-element tuple containing</p>
<ul class="simple">
<li><strong>firstIdx</strong>: The index of the first block.</li>
<li><strong>lastIdx</strong>: The index of the last block.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If all blocks have been done already, <cite>lastIdx</cite> will be an empty
vector. This will prevent any loop of the form k:lastIdx from running, but
you should make sure you don't rely on the numericity of lastIdx in other
ways.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.helpers.getReferenceSideAndValue">
<code class="descclassname">PTF.lib.helpers.</code><code class="descname">getReferenceSideAndValue</code><span class="sig-paren">(</span><em>trialData</em>, <em>blockConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.helpers.getReferenceSideAndValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts properties of the reference from both supplied configuration structs.</p>
<p>Checks if there is any specific reference side &amp; value defined for this
trial, or for this block. If reference side is unavailable, generate it at
random.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trialData</strong> -- A table of trial information</li>
<li><strong>blockConfig</strong> -- A block configuration</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>2-element tuple containing</p>
<ul class="simple">
<li><strong>referenceSide</strong>: Side on which the reference should be displayed</li>
<li><strong>referenceValue</strong>: The value to display.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.helpers.isFunction">
<code class="descclassname">PTF.lib.helpers.</code><code class="descname">isFunction</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.helpers.isFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Is the argument a function handle?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> -- Any matlab object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A boolean to determine if x is of class function handle</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.helpers.isFunctionOrFunctionArray">
<code class="descclassname">PTF.lib.helpers.</code><code class="descname">isFunctionOrFunctionArray</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.helpers.isFunctionOrFunctionArray" title="Permalink to this definition">¶</a></dt>
<dd><p>Is the input object is a function handle or a function handle array?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> -- Any matlab object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">true if x is function handle or a cell array full of function handles.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.helpers.loadOrCreate">
<code class="descclassname">PTF.lib.helpers.</code><code class="descname">loadOrCreate</code><span class="sig-paren">(</span><em>subjectId</em>, <em>fname</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.helpers.loadOrCreate" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a subject data file. If it does not exist, create it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>subjectID</strong> -- A participant ID</li>
<li><strong>fname</strong> -- A filename</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>2-element tuple containing</p>
<ul class="simple">
<li><strong>Data</strong>: Participant information.</li>
<li><dl class="first docutils">
<dt><strong>existed</strong>: Boolean reporting whether the file previously existed, or</dt>
<dd>had to be created.</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Currently assumes that subject data is stored in a struct called Data,
and that the folders in the path to <cite>fname</cite> all exist.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.helpers.prependPath">
<code class="descclassname">PTF.lib.helpers.</code><code class="descname">prependPath</code><span class="sig-paren">(</span><em>filenames</em>, <em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.helpers.prependPath" title="Permalink to this definition">¶</a></dt>
<dd><p>When given a cell array <cite>filenames</cite>, returns that cell array
with <cite>path</cite> added before each element of the cell array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filenames</strong> -- A cell array of file names</li>
<li><strong>path</strong> -- A string folder on which the filenames are located.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A cell array with 'path' before each array element.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">fullpaths</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PTF.lib.helpers.saveData">
<code class="descclassname">PTF.lib.helpers.</code><code class="descname">saveData</code><span class="sig-paren">(</span><em>Data</em><span class="sig-paren">)</span><a class="headerlink" href="#PTF.lib.helpers.saveData" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a subject data file to <cite>Data.filename</cite>.</p>
<p>Ensures that it stores the struct Data correctly, such that <cite>loadOrCreate</cite>
can load it properly.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Data</strong> -- Participant information.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Participant information.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Data</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The function assumes that the trial-handling functions haven't overwritten
previous records in Data, and as such, overwrites the file without
warning.</p>
</div>
<div class="admonition-todo admonition" id="index-7">
<p class="first admonition-title">Todo</p>
<p class="last">Determine what a file that's being overwritten with different info would
look like, and test for that</p>
</div>
</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="tasks.html" class="btn btn-neutral" title="Callable tasks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, SP.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.11',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>